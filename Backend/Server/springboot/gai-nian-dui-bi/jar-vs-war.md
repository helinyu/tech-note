# Jar vs War

在Spring Boot中，`JAR`（Java ARchive）包和`WAR`（Web Application ARchive）包都是用于部署应用程序的方式，但它们之间有一些显著的区别，主要体现在如何打包、如何部署以及运行环境的差异。

#### 1. **JAR包（可执行Jar包）**

* **自包含（Self-contained）**：Spring Boot 的 `JAR` 包通常是“可执行”包，它包含了应用程序本身以及嵌入式服务器（如 Tomcat, Jetty 或 Undertow）。这样，你可以直接运行该 `JAR` 文件，而不需要额外的外部应用服务器。
* **运行方式**：可以通过命令行直接运行：`java -jar your-app.jar`。
* **用途**：适用于微服务架构、单体应用等，不需要依赖外部的Servlet容器，部署起来更为简单。
* **示例**：
  * `spring-boot-maven-plugin` 会把应用打包为一个自包含的 `JAR` 文件。
  * 打包方式：`mvn clean package`。
* **优点**：
  * 不依赖外部容器，简化了部署和配置。
  * 便于分布式部署、云部署等。
* **缺点**：
  * 打包文件可能比较大（因为包括了所有依赖和嵌入式容器）。

#### 2. **WAR包（Web应用程序包）**

* **依赖外部服务器**：`WAR` 包通常不包含嵌入式服务器，而是依赖于外部的Servlet容器（如Tomcat、Jetty等）。你需要将 `WAR` 包部署到支持的Servlet容器中。
* **运行方式**：将 `WAR` 包部署到应用服务器上运行。比如，把 `WAR` 包放到 Tomcat 的 `webapps` 目录下。
* **用途**：适用于传统的Web应用，需要依赖外部容器的部署方式。
* **示例**：
  * 使用 `spring-boot-maven-plugin` 配置将 Spring Boot 项目打包为 `WAR` 文件。
  * 打包方式：`mvn clean package -DskipTests`。
* **优点**：
  * 可以与现有的应用服务器集成，适合传统的部署方式。
  * 更加符合一些企业级应用的架构要求。
* **缺点**：
  * 需要配置和管理外部容器，部署稍显复杂。

#### 3. **关键区别**

| 特性       | JAR包                        | WAR包                       |
| -------- | --------------------------- | -------------------------- |
| **服务器**  | 包含嵌入式服务器（如 Tomcat, Jetty 等） | 依赖外部服务器（如 Tomcat, Jetty 等） |
| **部署方式** | 直接运行 `java -jar`            | 部署到应用服务器中                  |
| **应用场景** | 适用于微服务架构、自包含应用              | 适用于传统的 Web 应用，依赖容器         |
| **配置管理** | 配置更简便，自动管理容器                | 需要手动配置和管理服务器               |
| **文件大小** | 较大，包含所有依赖和服务器               | 通常较小，只包含应用代码和资源            |

#### 4. **Spring Boot支持的打包方式**

Spring Boot 默认推荐使用 `JAR` 包，因为它简化了部署过程，但也提供了打包为 `WAR` 包的选项。如果你需要将Spring Boot应用部署到传统的Tomcat等Servlet容器上，可以选择打包成 `WAR` 文件。

**如何选择？**

* 如果你的应用是微服务架构，或者你需要简化部署过程，建议选择 `JAR` 包。
* 如果你已有传统的Web容器（如Tomcat）或需要集成到传统企业架构中，可以选择 `WAR` 包。
