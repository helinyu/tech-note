# fgetc、getc

`fgetc` 和 `getc` 都是用于从文件流中读取字符的函数，功能相似，但在实现和用法上有一些区别。以下是它们的关系与区别：

#### 1. 相似之处

* **功能**：两者都用于从指定的文件流中读取一个字符，并返回该字符的值。
* **返回值**：两者都在成功时返回读取的字符，失败或到达文件末尾时返回 `EOF`。

#### 2. 关系

* **来源**：`getc` 在某些实现中可能被定义为一个宏，这意味着它可以在编译时更直接地执行，提高效率；而 `fgetc` 通常是一个函数。
* **行为**：它们的行为基本相同，可以互换使用，但具体实现可能会有所不同。

#### 3. 区别

* **性能**：由于 `getc` 有时是宏，它可能在某些情况下比 `fgetc` 更快，因为宏在编译时直接展开，而不是通过函数调用进行。不过，在现代编译器中，这种性能差异通常不明显。
*   **语法**：

    * `fgetc` 需要调用格式：`fgetc(stream)`
    * `getc` 也需要调用格式：`getc(stream)`

    但在一些特定情况下，`getc` 可以被直接使用，不需要额外的调用开销（取决于实现）。

#### 使用示例

```c
#include <stdio.h>

int main() {
    FILE *fp = fopen("example.txt", "r");
    if (fp == NULL) {
        perror("Error opening file");
        return 1;
    }

    // 使用 fgetc
    int c1;
    while ((c1 = fgetc(fp)) != EOF) {
        putchar(c1);
    }

    // 重置文件指针
    rewind(fp);

    // 使用 getc
    int c2;
    while ((c2 = getc(fp)) != EOF) {
        putchar(c2);
    }

    fclose(fp);
    return 0;
}
```

#### 总结

* `fgetc` 和 `getc` 都可以用于读取字符，选择哪个函数通常取决于个人习惯或具体需求。
* 如果对性能有严格要求，可以测试具体实现的速度。



## 小结：

建议使用getc ，因为是宏定义，在编译的时候就优化处理了，不过差别不大。
