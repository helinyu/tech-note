# fts5 和fts3的区别

SQLite 的 FTS（Full-Text Search，全文搜索）模块提供了两种不同的实现：FTS3 和 FTS5。它们在功能、性能和特性上有一些显著的区别。以下是 FTS3 和 FTS5 的主要区别：

#### 1. **功能性**

* **FTS3**:
  * 提供基本的全文搜索功能。
  * 支持简单的文本查询和词汇匹配。
  * 不支持复杂的查询特性，如布尔查询和短语查询。
* **FTS5**:
  * 增强了全文搜索功能，**支持更复杂的查询**。
  * 提供了**布尔查询、短语匹配和通配符搜索等**功能。
  * 允许使用**外部排序和虚拟表支持**，使其更灵活。

#### 2. **性能**

* **FTS3**:
  * 性能较为基本，适合小型或中型应用。
  * 处理大数据集时可能会表现出一些性能瓶颈。
* **FTS5**:
  * 进行了多种性能优化，特别是在处理大型数据集时表现更佳。
  * 提供了增量索引（incremental indexing），使得索引更新更加高效。
  * 支持<mark style="color:red;">**并行查询**</mark>**和更快的查询响应时间**。

#### 3. **索引机制**

* **FTS3**:
  * 使用较简单的<mark style="color:red;">**倒排索引**</mark>（inverted index）机制，适用于基本查询需求。
* **FTS5**:
  * 采用改进的索引结构，支持更多的<mark style="color:red;">索引选项和定制化配置</mark>。
  * 支持多种文档格式的索引，如 JSON 和 XML。

#### 4. **扩展性**

* **FTS3**:
  * 可扩展性有限，不支持自定义的分词器。
* **FTS5**:
  * 提供<mark style="color:red;">自定义分词器</mark>（tokenizers）支持，可以根据具体需求定制分词方式。
  * 允许用户定义和使用<mark style="color:red;">自定义的排序规则</mark>。

#### 5. **API 和语法**

* **FTS3**:
  * 使用较为简单的 SQL 语法进行查询，适合初学者。
* **FTS5**:
  * 提供更丰富的 SQL 语法，支持更复杂的查询结构。
  * 在某些情况下，语法可能比 FTS3 更复杂，但功能更强大。

#### 6. **向后兼容性**

* **FTS3**:
  * 是较早的实现，许多现有项目仍在使用。
* **FTS5**:
  * 设计上与 FTS3 不完全兼容，尽管可以在一定程度上迁移，但某些特性和用法需要重新适配。

#### 7. **适用场景**

* **FTS3**:
  * 适用于较简单的搜索需求和小型应用。
* **FTS5**:
  * 更适合需要复杂搜索和大数据集的应用，尤其是在性能和功能方面的需求更高的场景。

#### 总结

FTS5 是 FTS3 的增强版本，提供了更强大的功能、更好的性能和更高的灵活性。如果你的应用需要更复杂的全文搜索能力，建议使用 FTS5。如果只需要基本的搜索功能，FTS3 也可以满足需求。
