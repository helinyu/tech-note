# ninja

[生成 ninja 构建文件的生成器列表](https://github.com/ninja-build/ninja/wiki/List-of-generators-producing-ninja-build-files)



Ninja 是一个小型的构建系统，主要用于处理大型项目的增量构建。以下是关于 Ninja 的一些关键内容，包括其特点、使用场景和基本概念：

#### 1. **特点**

* **高效性**: Ninja 设计的核心目标是快速构建，能够高效地处理大量文件的增量构建。
* **简单的语法**: 使用简单的 `build.ninja` 文件来定义构建规则和依赖关系。
* **增量构建**: Ninja 只会重建那些依赖于已更改源文件的目标，从而提高构建速度。
* **并行构建**: 支持并行构建，可以利用多核 CPU 的优势，加速构建过程。
* **与 CMake 集成**: Ninja 通常与 CMake 等生成工具结合使用，生成 Ninja 文件。

#### 2. **使用场景**

* **大型项目**: Ninja 特别适合于需要频繁构建的复杂项目，尤其是在 C/C++ 开发中。
* **游戏开发**: 由于大型游戏项目中的资源和代码库庞大，Ninja 的高效增量构建非常受欢迎。
* **嵌入式开发**: 在嵌入式系统开发中，Ninja 也常用于构建固件和其他二进制文件。

#### 3. **基本概念**

* **build.ninja**: Ninja 的配置文件，定义了构建规则和依赖关系。每个规则指定了如何构建目标文件以及依赖的源文件。
* **规则（rule）**: 描述如何生成目标文件的命令和所需的工具。使用 `rule` 关键字定义。
* **目标（build）**: 具体的构建目标，包括生成的文件、依赖文件以及对应的规则。

#### 4. **示例**

一个简单的 `build.ninja` 文件示例：

```ninja
# 定义编译规则
rule cc
  command = gcc -c $in -o $out

# 定义链接规则
rule link
  command = gcc $in -o $out

# 构建目标
build hello.o: cc hello.c
build world.o: cc world.c
build hello_world: link hello.o world.o
```

在这个例子中：

* 定义了两个规则，`cc` 用于编译 C 文件，`link` 用于链接生成可执行文件。
* `build` 语句指定了生成目标文件（如 `hello.o` 和 `world.o`）以及依赖关系。

#### 5. **使用方法**

* **安装**: 可以从 Ninja 的 GitHub 页面下载预编译的二进制文件或源代码进行安装。
* **构建**: 在包含 `build.ninja` 文件的目录中运行命令 `ninja`，它将读取文件并执行构建任务。
* **增量构建**: 修改源文件后，重新运行 `ninja`，它将只重新构建已更改的目标。

#### 6. **优势与劣势**

* **优势**:
  * 高性能，适合大型项目。
  * 简洁的构建语法。
  * 支持并行构建。
* **劣势**:
  * 功能较少，主要关注构建，缺少包管理和更复杂的构建逻辑。
  * 初学者可能需要一些时间适应其简洁的语法。

#### 总结

Ninja 是一个高效、简单的构建系统，特别适合需要快速增量构建的大型项目。它与其他生成工具（如 CMake）结合使用时，可以极大地提高开发效率。

\
