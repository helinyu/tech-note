# 详细对比

"Coordinator模式" 和 "中介者模式"（**Mediator Pattern**）有很多相似之处，但它们在具体使用场景和概念上有一些区别。以下是它们的对比：

#### 1. **定义**：

* **中介者模式（Mediator Pattern）**：中介者模式通过引入一个中介者对象来协调多个对象之间的交互，减少对象之间的直接依赖。每个对象不再直接与其他对象通信，而是通过中介者来进行沟通。这种模式的目标是解耦系统中对象之间的关系。
* **协调者模式（Coordinator Pattern）**：协调者模式通常用于一种场景，其中不同的业务组件或对象之间通过协调者进行更高层次的集成。协调者负责在组件之间调度任务，协调对象之间的交互，通常包含一定的业务逻辑处理，而不仅仅是简单的传递信息。

#### 2. **核心目标**：

* **中介者模式**：目的是解耦对象之间的直接通信，将这些通信集中在一个中介者对象中。中介者不涉及具体的业务逻辑，只是负责协调对象之间的通信。
* **协调者模式**：目标不仅是解耦通信，还可能涉及更多的业务逻辑管理。协调者通常负责协调多个组件或对象的交互，包括调度、管理和一些业务层面的决策。

#### 3. **角色与责任**：

*   **中介者模式**：

    * **Mediator（中介者接口）**：定义通信接口。
    * **ConcreteMediator（具体中介者）**：实现协调逻辑，管理和调度各个Colleague之间的交互。
    * **Colleague（同事对象）**：对象通过中介者与其他对象交互，不直接联系其他对象。

    中介者模式的中介者角色通常不涉及具体的业务逻辑，只负责传递信息或协调事件。
*   **协调者模式**：

    * **Coordinator（协调者）**：在协调者模式中，Coordinator通常不仅管理对象间的通信，还承担着更复杂的任务，比如调度、决策、业务规则处理等。
    * **Participants（参与者）**：参与者通常会通过协调者进行通信，但他们更多关注自己的业务逻辑，并依赖协调者来完成某些任务。

    协调者通常承担着更加复杂的业务管理职责，可能会包含多个对象或组件的生命周期管理、状态跟踪等。

#### 4. **应用场景**：

* **中介者模式**：适用于复杂对象之间需要解耦的情况，尤其是在对象间直接交互较多时。常见的场景包括图形界面（GUI）中的控件间交互，消息传递系统等。
* **协调者模式**：更适合在一个系统中需要多个不同模块、组件或服务之间的协调与整合。常见于多层次的业务应用中，例如管理多个模块之间的交互、调度复杂的流程等。协调者还可能涉及更高层次的决策，如控制工作流或实现复杂的业务规则。

#### 5. **举例**：

*   **中介者模式**：在聊天室应用中，每个用户对象通过中介者（聊天室）进行通信，而不是直接与其他用户通信。聊天室负责传递消息给其他用户。

    ```python
    class ChatRoom(Mediator):
        def send(self, message: str, colleague: 'Colleague'):
            for c in self.colleagues:
                if c != colleague:
                    c.receive(message)
    ```
*   **协调者模式**：一个大型企业的ERP系统，订单模块、库存模块和发货模块之间通过协调者进行调度。协调者不仅传递数据，还处理各模块之间的业务逻辑和工作流。例如，协调者会根据订单状态决定是否发货，是否需要补充库存等。

    ```python
    class OrderCoordinator:
        def process_order(self, order: Order):
            if order.is_valid():
                inventory_manager.reserve_stock(order)
                shipping_manager.schedule_shipping(order)
            else:
                alert_manager.send_alert(order)
    ```

#### 6. **复杂性**：

* **中介者模式**：通常比较简单，重点在于协调通信，减少对象之间的耦合关系。它的复杂性主要在于中介者的实现和对象间的交互。
* **协调者模式**：往往更复杂，因为协调者不仅需要进行对象间的协调，还可能涉及业务逻辑、工作流处理、状态管理等。协调者模式通常是多模块、多组件的复杂系统中使用的模式。

#### 7. **是否涉及业务逻辑**：

* **中介者模式**：通常不涉及具体的业务逻辑，更多的是进行对象间的通信协调。
* **协调者模式**：协调者不仅负责通信，还经常涉及复杂的业务决策和工作流处理。

#### 总结对比：

<table data-header-hidden><thead><tr><th width="234"></th><th></th><th></th></tr></thead><tbody><tr><td>特性</td><td><strong>中介者模式 (Mediator)</strong></td><td><strong>协调者模式 (Coordinator)</strong></td></tr><tr><td><strong>核心目标</strong></td><td>解耦对象间的通信，使对象间不直接依赖</td><td>除了解耦，还负责协调、调度任务和管理业务逻辑</td></tr><tr><td><strong>角色和责任</strong></td><td>中介者负责协调通信，Colleague执行具体逻辑</td><td>协调者负责管理多个组件或模块的交互和决策</td></tr><tr><td><strong>应用场景</strong></td><td>适用于多个对象之间的复杂交互，如GUI控件、消息系统等</td><td>适用于更复杂的业务流程和多个组件之间的协作和调度</td></tr><tr><td><strong>复杂性</strong></td><td>较为简单，主要解决对象间通信的解耦问题</td><td>更复杂，涉及业务逻辑和多模块的调度与协调</td></tr><tr><td><strong>业务逻辑处理</strong></td><td>通常不涉及，主要负责对象之间的消息传递</td><td>涉及较多的业务逻辑，负责调度和管理多模块的工作流</td></tr></tbody></table>

#### 结论：

* **中介者模式** 主要用于解耦对象之间的直接通信，使得它们不直接依赖对方。而**协调者模式**则更加强调在多个组件之间协调、调度、管理复杂的业务流程和决策。协调者模式的应用场景通常比中介者模式要复杂，涉及更多的业务逻辑和模块协作。
