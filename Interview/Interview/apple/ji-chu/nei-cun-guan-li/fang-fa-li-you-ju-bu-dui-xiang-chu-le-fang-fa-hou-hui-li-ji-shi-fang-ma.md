# 方法里有局部对象， 出了方法后会立即释放吗

在 Objective-C 中，局部对象的释放时机取决于其引用计数和使用的内存管理机制：

#### 1. 局部变量的生命周期

* **栈上的局部对象**：如果局部对象是基本数据类型或结构体（如 `int`、`CGPoint`），它们在方法结束后会自动从栈上释放。

#### 2. 对象的引用计数

* **堆上的对象**：如果局部对象是通过 `alloc` 创建的对象，它会在堆上分配内存。当方法结束时，该对象的引用计数不会自动归零，除非：
  * 使用 `retain` 增加引用计数，或者
  * 使用 `autorelease` 添加到自动释放池中。

#### 3. 手动管理

* **手动释放**：如果在方法中创建的对象是强引用，并且你在方法结束时没有释放它，引用计数会保持不变，直到调用 `release` 或 `autorelease`。在方法结束后，如果没有任何强引用指向它，并且没有其他地方调用 `release`，该对象的内存不会被释放。

#### 4. ARC 的影响

* **自动引用计数（ARC）**：在使用 ARC 的情况下，当方法返回时，局部对象的引用计数会自动管理。如果没有强引用，局部对象将在方法结束后被释放。

#### 总结

局部对象在方法结束后不会立即释放，除非它的引用计数降为零。在使用 ARC 时，内存管理更加自动化，而在手动管理下，开发者需要确保在不再需要对象时适当地释放它。
