# 数据流

在MVC模式中，数据流向至关重要。为了确保模型、视图和控制器之间的责任明确，并且数据在它们之间流动顺畅，以下是MVC中数据的典型流向：

#### 1. **从模型到视图的数据流**

* **模型更新控制器**：模型中的数据发生变化时，通常通过通知、KVO（Key-Value Observing）或直接调用控制器方法来告知控制器。
* **控制器更新视图**：控制器接收到模型的变化后，将新数据传递给视图，然后通过刷新视图的方式呈现最新的数据。

**示例**： 假设我们有一个待办事项的应用程序，当用户添加新任务时，数据首先会更新模型，模型再通知控制器，控制器将新数据传递给视图并触发视图刷新显示。

#### 2. **从视图到控制器的数据流**

* **用户交互触发事件**：当用户与视图交互（如点击按钮、输入文本）时，视图将事件通知控制器。
* **控制器接收事件**：控制器响应这些事件，将用户意图转化为具体的操作（如更新模型数据或导航到新页面）。

**示例**： 当用户点击“完成任务”按钮时，视图通过委托（delegate）或回调将事件传递给控制器，控制器接收事件并相应地更新模型。

#### 3. **从控制器到模型的数据流**

* **控制器操作模型**：当控制器接收到用户交互事件（例如，添加、删除、编辑数据）时，它会调用模型中的方法来执行这些数据的操作。
* **模型更新数据并通知控制器**：如果数据变更会影响视图显示，模型可以通过通知控制器，促使其更新视图。

**示例**： 用户点击“添加新任务”按钮后，控制器会将输入的数据传递给模型中的新增方法，模型更新数据后，通知控制器刷新视图。

#### 4. **典型的数据流过程总结**

* **模型 -> 控制器 -> 视图**：当模型数据发生改变，数据通过控制器流向视图以更新UI。
* **视图 -> 控制器 -> 模型**：当用户与UI交互时，事件通过控制器传递到模型，促使数据更新。
* **单向数据流**：MVC模式通常采用单向数据流，从而保证数据传递过程的可控性和清晰度。

#### 示例流程：待办事项应用中的数据流

假设我们有一个待办事项列表，用户可以新增或完成任务，数据流向如下：

1. **用户在视图上点击“新增任务”按钮**，视图通过委托或回调将事件传递给控制器。
2. **控制器接收事件**并调用模型的新增任务方法。
3. **模型更新数据**（新增任务），然后通过通知或KVO告诉控制器数据发生变化。
4. **控制器接收到模型的通知**后，将新任务的数据传递给视图，视图刷新显示新的待办事项列表。

这个数据流过程帮助MVC保持模块之间的职责清晰，使代码更易于理解和维护。
